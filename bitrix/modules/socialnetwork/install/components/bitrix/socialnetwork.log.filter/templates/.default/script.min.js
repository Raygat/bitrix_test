__logOnDateChange=function(e){var t=false,n=false,a=false,i=false;if(e.value=="interval")t=n=a=true;else if(e.value=="before")n=true;else if(e.value=="after"||e.value=="exact")t=true;else if(e.value=="days")i=true;BX("flt_date_from_span").style.display=t?"":"none";BX("flt_date_to_span").style.display=n?"":"none";BX("flt_date_hellip_span").style.display=a?"":"none";BX("flt_date_day_span").style.display=i?"inline-block":"none";BX("flt_date_day_text_span").style.display=i?"inline-block":"none"};function __logOnReload(e){if(BX("menu-popup-lenta-sort-popup")){var t=BX.findChildren(BX("menu-popup-lenta-sort-popup"),{className:"lenta-sort-item"},true);if(!BX.hasClass(t[0],"lenta-sort-item-selected")){for(var n=0;n<t.length;n++){if(n==0)BX.addClass(t[n],"lenta-sort-item-selected");else if(n!=t.length-1)BX.removeClass(t[n],"lenta-sort-item-selected")}}}if(BX("lenta-sort-button")){var a=BX.findChild(BX("lenta-sort-button"),{className:"lenta-sort-button-text-internal"},true,false);if(a)a.innerHTML=BX.message("sonetLFAllMessages")}var i=BX("sonet_log_counter_preset",true);if(i){if(parseInt(e)>0){i.style.display="inline-block";i.innerHTML=e}else{i.innerHTML="";i.style.display="none"}}}BitrixLFFilter=function(){this.filterPopup=false;this.currentName=null;this.obInputName={};this.obSearchInput={};this.obInputContainerName={};this.obContainerInput={}};BitrixLFFilter.prototype.initFilter=function(e){__logOnDateChange(document.forms["log_filter"].flt_date_datesel);BX("flt_date_from_span").onclick=function(){BX.calendar({node:this,field:BX("flt_date_from"),bTime:false})};BX("flt_date_to_span").onclick=function(){BX.calendar({node:this,field:BX("flt_date_to"),bTime:false})}};BitrixLFFilter.prototype.initDestination=function(e){this.obInputName[e.name]=e.inputName;this.obSearchInput[e.name]=BX(e.inputName);this.obInputContainerName[e.name]=e.inputContainerName;this.obContainerInput[e.name]=BX(e.inputContainerName);if(typeof e.items!="undefined"&&typeof e.items.department!="undefined"){if(typeof e.items.extranetRoot!="undefined"){for(var t in e.items.extranetRoot){if(e.items.extranetRoot.hasOwnProperty(t)){e.items.department[t]=e.items.extranetRoot[t]}}}if(!e.items.departmentRelation){e.items.departmentRelation=BX.SocNetLogDestination.buildDepartmentRelation(e.items.department)}}BX.SocNetLogDestination.init({name:e.name,searchInput:this.obSearchInput[e.name],extranetUser:!!e.extranetUser,departmentSelectDisable:!!e.departmentSelectDisable,bindMainPopup:{node:e.bindNode,offsetTop:"5px",offsetLeft:"15px"},bindSearchPopup:{node:e.bindNode,offsetTop:"5px",offsetLeft:"15px"},callback:{select:BX.proxy(this.onSelectDestination,{name:e.name,containerInput:BX(e.inputContainerName),inputContainerName:e.inputContainerName,inputName:e.inputName,searchInput:BX(e.inputName),resultFieldName:e.resultFieldName}),unSelect:BX.proxy(this.onUnSelectDestination,{name:e.name,inputContainerName:e.inputContainerName,inputName:e.inputName,searchInput:BX(e.inputName)})},items:e.items,itemsLast:e.itemsLast,itemsSelected:e.itemsSelected,isCrmFeed:false,useClientDatabase:true,destSort:e.destSort,allowAddUser:false,allowSearchEmailUsers:!e.extranetUser,userNameTemplate:e.userNameTemplate});BX.bind(this.obSearchInput[e.name],"click",function(t){oLFFilter.currentName=e.name;BX.SocNetLogDestination.openDialog(e.name);return BX.PreventDefault(t)});BX.bind(this.obSearchInput[e.name],"keyup",BX.delegate(BX.SocNetLogDestination.BXfpSearch,{formName:e.name,inputName:oLFFilter.obInputName[e.name]}));BX.bind(this.obSearchInput[e.name],"keydown",BX.delegate(BX.SocNetLogDestination.BXfpSearchBefore,{formName:e.name,inputName:oLFFilter.obInputName[e.name]}))};BitrixLFFilter.prototype.clearInput=function(){if(this.obContainerInput[this.currentName]){var e=BX.findChildren(this.obContainerInput[this.currentName],{className:"feed-add-post-destination"},false);for(var t=0;t<e.length;t++){BX.SocNetLogDestination.deleteItem(e[t].attributes["data-id"].value,e[t].attributes["data-type"].value,this.currentName)}}};BitrixLFFilter.prototype.onSelectDestination=function(e,t,n,a){oLFFilter.clearInput();BX.SocNetLogDestination.BXfpSelectCallback({formName:this.name,item:e,type:t,search:n,bUndeleted:a,containerInput:this.containerInput,valueInput:this.searchInput,varName:this.resultFieldName});this.searchInput.style.display="none";if(this.name=="feed-filter-created-by"&&BX("flt_comments_cont")){BX("flt_comments_cont").style.display="block"}BX.SocNetLogDestination.closeDialog();BX.SocNetLogDestination.closeSearch()};BitrixLFFilter.prototype.onUnSelectDestination=function(e){var t=BX.findChildren(BX(this.inputContainerName),{attribute:{"data-id":""+e.id+""}},true);if(t!==null){for(var n=0;n<t.length;n++){BX.remove(t[n])}}BX(this.inputName).value="";this.searchInput.style.display="inline-block";if(this.name=="feed-filter-created-by"&&BX("flt_comments_cont")){BX("flt_comments_cont").style.display="none"}};BitrixLFFilter.prototype.ShowFilterPopup=function(e){if(!oLFFilter.filterPopup){BX.ajax.get(BX.message("sonetLFAjaxPath"),function(t){BX.closeWait(e);oLFFilter.filterPopup=new BX.PopupWindow("bx_log_filter_popup",e,{closeIcon:false,offsetTop:5,autoHide:true,zIndex:-100,className:"sonet-log-filter-popup-window",events:{onPopupClose:function(){if(!BX.hasClass(this.bindElement,"pagetitle-menu-filter-set"))BX.removeClass(this.bindElement,"pagetitle-menu-filter-selected")},onPopupShow:function(){BX.addClass(this.bindElement,"pagetitle-menu-filter-selected")}}});var n=BX.create("DIV",{html:BX.util.trim(t)});oLFFilter.filterPopup.setContent(n.firstChild);oLFFilter.filterPopup.show()})}else{oLFFilter.filterPopup.show()}};BitrixLFFilter.prototype.__SLFShowExpertModePopup=function(e){var t=new BX.PopupWindow("setExpertModePopup",e,{closeByEsc:false,closeIcon:false,autoHide:false,overlay:true,events:{},buttons:[],zIndex:0,content:BX.create("DIV",{children:[BX.create("DIV",{props:{className:"bx-slf-popup-title"},text:BX.message("sonetLFExpertModePopupTitle")}),BX.create("DIV",{props:{className:"bx-slf-popup-content"},children:[BX.create("DIV",{props:{className:"bx-slf-popup-cont-title"},html:BX.message("sonetLFExpertModePopupText1")}),BX.create("DIV",{props:{className:"bx-slf-popup-descript"},children:[BX.create("DIV",{html:BX.message("sonetLFExpertModePopupText2")}),BX.create("IMG",{props:{className:"bx-slf-popup-descript-img"},attrs:{src:BX.message("sonetLFExpertModeImagePath"),width:354,height:201}})]})]}),BX.create("DIV",{props:{className:"popup-window-buttons"},children:[BX.create("SPAN",{props:{className:"popup-window-button popup-window-button-accept"},events:{click:function(){BX.ajax({method:"POST",dataType:"json",url:BX.message("ajaxControllerURL"),data:{sessid:BX.bitrix_sessid(),closePopup:"Y"},onsuccess:function(e){if(typeof e!="undefined"&&typeof e.SUCCESS!="undefined"&&e.SUCCESS=="Y"){t.close();top.location=top.location.href}}})}},children:[BX.create("SPAN",{props:{className:"popup-window-button-left"}}),BX.create("SPAN",{props:{className:"popup-window-button-text"},text:BX.message("sonetLFDialogRead")}),BX.create("SPAN",{props:{className:"popup-window-button-right"}})]})]})]})});t.show()};oLFFilter=new BitrixLFFilter;window.oLFFilter=oLFFilter;
//# sourceMappingURL=script.map.js