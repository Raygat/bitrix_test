BX.namespace("BX.Lists");BX.Lists.ListsFieldEditClass=function(){var e=function(e){this.randomString=e.randomString;this.ajaxUrl="/bitrix/components/bitrix/lists.field.edit/ajax.php";this.iblockTypeId=e.iblockTypeId;this.iblockId=e.iblockId;this.socnetGroupId=e.socnetGroupId;this.jsClass="ListsFieldEditClass"+e.randomString;this.maxSort=0;this.generateCode=Boolean(e.generateCode);this.prefixFieldId="bx-lists-field-";this.init()};e.prototype.init=function(){this.transliterate();if(this.generateCode&&BX(this.prefixFieldId+"name")){BX(this.prefixFieldId+"name").onkeyup=BX.delegate(function(){this.transliterate()},this);BX(this.prefixFieldId+"name").onblur=BX.delegate(function(){this.transliterate()},this)}};e.prototype.transliterate=function(){if(!this.generateCode||!BX(this.prefixFieldId+"name")||!BX(this.prefixFieldId+"code")){return false}var e=BX.translit(BX(this.prefixFieldId+"name").value,{change_case:"U"});while(true){var t=e.charAt(0);if(!isNaN(parseInt(t)))e=e.substr(1);else break}BX(this.prefixFieldId+"code").value=e};e.prototype.changeType=function(e){var t=BX(e);var a=BX("action");if(t&&a){BX.showWait();a.value="type_changed";t.submit()}};e.prototype.deleteField=function(e,t){var a=BX(e);var i=BX("action");if(a&&i){if(confirm(t)){i.value="delete";a.submit()}}};e.prototype.deleteListItem=function(e){var t=BX.findParent(e,{tag:"tr"});if(t){var a=BX.findChild(t,{tag:"input","class":"sort-input"},true);if(a){var i=t.parentNode;i.parentNode.appendChild(a);i.removeChild(t)}}};e.prototype.toggleInput=function(e){var t=BX(e);if(t){if(t.style.display=="block")t.style.display="none";else t.style.display="block"}};e.prototype.addNewTableRow=function(e,t,a){var i=BX(e);var r=i.rows.length;var n=i.insertRow(r);var s=i.rows[r-1].cells.length;if(!this.maxSort){var l=BX.findChild(i.rows[r-1],{tag:"input","class":"sort-input"},true);if(l)this.maxSort=parseInt(l.value)+10}for(var o=0;o<s;o++){var f=n.insertCell(o);var d=i.rows[r-1].cells[o].innerHTML;f.align=i.rows[r-1].cells[o].align;if(o==0)f.style.display="none";else f.className=i.rows[r-1].cells[o].className;f.innerHTML=d.replace(t,function(e){return e.replace("[n"+arguments[a]+"]","[n"+(1+parseInt(arguments[a]))+"]")})}var u=BX.findChild(i.rows[r],{tag:"input","class":"sort-input"},true);if(u){u.value=this.maxSort;this.maxSort+=10}};return e}();var dragTable=function(e,t){var a=false;var i=false;var r=false;var n=false;var s=false;var l=function(){i=e.getElementsByTagName("tbody")[0];e.onmousedown=o;e.onmouseleave=f;e.onmouseup=f;e.onmousemove=d};var o=function(i){var l=i.target||i.srcElement;if(l.tagName=="TD"){BX.eventReturnFalse(i);var o=l.parentNode;if(o.parentNode.nodeName!=="TBODY"&&l.tagName=="TD")return false;if(a&&l.tagName=="TD")return false;s=o;a=o;a.setAttribute("class","lists-field-drag-tr");r=i.y||i.clientY;n=u(a);if(t&&t.start)t.start(e,s,n)}};var f=function(i){var l=i.target||i.srcElement;if(l.tagName=="TD"){if(!a)return false;a.removeAttribute("class");r=false;a=false;if(t&&t.stop)t.stop(e,s,n,u(s))}};var d=function(n){var l=n.target||n.srcElement;if(l.tagName=="TD"){if(!a)return false;var o=l.parentNode;if(o===a||o.nodeName!=="TR"||o.parentNode.nodeName!=="TBODY")return false;var f=n.y||n.clientY;var d=f<r;r=f;if(d){i.insertBefore(a,o)}else{i.insertBefore(o,a)}if(t&&t.dragging)t.dragging(e,a,o,u(s))}};var u=function(e){var t=i.getElementsByTagName("tr");for(var a=0,r=t.length;a<r;a++){if(t[a]===e)return a+1}return 0};l()};function enumerationValues(e){var t=BX.findChildren(e,{tag:"input",attribute:{type:"hidden"}},true);if(t[t.length-1].getAttribute("name")=="LIST[n0][SORT]"){for(var a=1;a<=t.length;a++){t[a-1].setAttribute("value",a*10)}}}
//# sourceMappingURL=script.map.js