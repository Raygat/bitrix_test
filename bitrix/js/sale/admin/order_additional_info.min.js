BX.namespace("BX.Sale.Admin.OrderAdditionalInfo");BX.Sale.Admin.OrderAdditionalInfo={choosePerson:function(e,i){window.open("/bitrix/admin/user_search.php?lang="+i+"&FN="+e+"&FC=RESPONSIBLE_ID","","scrollbars=yes,resizable=yes,width=840,height=500,top="+Math.floor((screen.height-560)/2-14)+",left="+Math.floor((screen.width-840)/2-5))},changePerson:function(){var e=BX("order_additional_info_responsible"),i=BX("RESPONSIBLE_ID").value;if(e)e.href="/bitrix/admin/user_edit.php?lang="+BX.lang+"&ID="+i;var n={action:"changeResponsibleUser",userId:i,siteId:BX.Sale.Admin.OrderEditPage.siteId,callback:function(e){BX.Sale.Admin.OrderAdditionalInfo.setResponsible(e.RESPONSIBLE);BX.Sale.Admin.OrderAdditionalInfo.setEmpResponsible(e.EMP_RESPONSIBLE);BX.Sale.Admin.OrderAdditionalInfo.setDateResponsible(e.DATE_RESPONSIBLE)}};BX.Sale.Admin.OrderAjaxer.sendRequest(n)},setResponsible:function(e){var i=BX("order_additional_info_responsible");if(e)e=BX.util.htmlspecialchars(e);if(i)BX.html(i,e)},setEmpResponsible:function(e){var i=BX("order_additional_info_emp_responsible");if(e)e=BX.util.htmlspecialchars(e);if(i)BX.html(i,e)},setDateResponsible:function(e){var i=BX("order_additional_info_date_responsible");if(e)e=BX.util.htmlspecialchars(e);if(i)BX.html(i,e)},showCommentsDialog:function(e,i){var n=i.innerHTML,t=new BX.CDialog({content:'<textarea style="width:710px;height:260px;" name="COMMENTS" id="COMMENTS">'+n+"</textarea>",title:BX.message("SALE_ORDER_ADDITIONAL_INFO_COMMENT_EDIT"),width:750,height:300,resizable:true});t.ClearButtons();t.SetButtons([{title:BX.message("SALE_ORDER_ADDITIONAL_INFO_COMMENT_SAVE"),action:function(){var t=BX("COMMENTS");if(t)n=t.value;else if(n==BX.message("SALE_ORDER_ADDITIONAL_INFO_NO_COMMENT"))n="";BX.Sale.Admin.OrderAdditionalInfo.saveComment(n,e,i);this.parentWindow.Close()}},BX.CDialog.prototype.btnCancel]);BX.addCustomEvent(t,"onWindowClose",function(e){e.DIV.parentNode.removeChild(e.DIV)});t.Show()},saveComment:function(e,i,n){BX.Sale.Admin.OrderAjaxer.sendRequest({action:"saveComments",comments:e,orderId:i,callback:function(e){if(e&&typeof e.COMMENTS!=="undefined"&&n)n.innerHTML=e.COMMENTS}})}};
//# sourceMappingURL=order_additional_info.map.js